\section{Related Work}\label{sec:rw}

%\vs{to do from scratch, should cover: stream processing papers, event-based middlewares, middleware that exploits hardware features}

A few dedicated solutions exist today for distributed stream processing using reactive programming.
For instance, \textsc{Reactive Kafka}~\cite{reactivekafka} allows stream processing atop of Apache \textsc{Kafka}~\cite{apachekafka}.
These solutions do not, however, support secure execution in a trusted execution environment.

More recently, some open-source middleware frameworks (\emph{e.g.}, Apache \textsc{Spark}~\cite{apachesparkstreaming}, Apache \textsc{Storm}~\cite{apachestorm}, \textsc{Infinispan}~\cite{infinispan}) introduced APIs to allow developers to quickly set up and deploy stream processing infrastructures.
These systems rely on the \emph{Java} virtual machine (JVM)~\cite{lindholm2014java}.
However, SGX currently imposes a hard memory limit of 128\,MB to the enclaved code and data, at the cost of expensive encrypted memory paging mechanisms and serious performance overheads~\cite{pires_scbr:2016,brenner_securekeeper:_2016} when this limit is crossed.
Moreover, executing a fully-functional JVM inside an SGX enclave would currently consist in significant re-engineering efforts.

Few recent contributions tackle privacy-preserving data processing, particularly in a MapReduce scenario.
This is the case of Airavat~\cite{Roy:2010:ASP:1855711.1855731} or GUPT~\cite{Mohan:2012:GPP:2213836.2213876}.
These systems leverage differential-privacy techniques~\cite{dwork2006calibrating} and can face a different threat model than the one supported by SGX and hence by \SYS.
In particular, one deploying such systems on a public infrastructure, one needs to trust the provider. 
Our system greatly reduces the trust boundaries, and only require to trust on Intel.

Many authors convene that public clouds may be secure enough some parts of an application. They propose to split the jobs, running only the critical parts in private clouds.
A privacy-aware framework on hybrid clouds \cite{xu2015framework} has been proposed to work on tagged data, at different granularity levels.
A MapReduce preprocessor splits data into private and public clouds according to their sensitivity.
Sedic \cite{zhang2011sedic} does not offer the same tagging granularity, but proposes to automatically modify reducers to optimize the data transfers in a hybrid cloud.
These solutions require splitting application and data in two parts (sensitive and not) and impose higher latencies due to data transfers between two different clouds.
Yet, they cannot offer better security guarantees that the software stack itself offers, be it public or private.

MrCrypt \cite{tetali2013mrcrypt}Â proposes using homomorphic encryption instead of trusted elements. Through static code analysis, it pinpoints different homomorphic encryption schemes for every data column. Still, some of the demonstrated benchmarks are ten times slower than the unecrypted execution. \SYS{} avoids of complex encryption schemes, decrypts data entering enclaves and processes in plaintext.

To best of our knowledge, \SYS{} is the first lightweight and low-memory footprint stream processing framework that can fully execute within SGX enclaves.
